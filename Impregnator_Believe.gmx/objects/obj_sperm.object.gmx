<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_sperm</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///initialize

device_tilt_x = 0;
device_tilt_y = 0;
//device_tilt_z = 0;

//error_counter = 0;

spd_factor_base = 50;
spd_factor = spd_factor_base;
device_tilt_x_min = 0.025;
device_tilt_y_min = 0.025;
device_tilt_x_max = 0.3;
device_tilt_y_max = 0.3;

speed_max = scr_speed_max();
speed_reduction = speed_max/20;//za 2/3 sekunde usporava od 100 do 0 (%)

theta = 0;
direction_diff_theta = 0;

image_speed = 0;
image_index = global.sperm_image;
mask_index = spr_sperm_mask;

state = 'normal-new';
//list of states:
//normal
//immobile


if(!instance_exists(obj_tail)){
    tail = instance_create(x,y,obj_tail)
}
if(!instance_exists(obj_camera)){
    camera = instance_create(x,y,obj_camera)
}
camera_style = 2;
/*if(!instance_exists(obj_button_left)){
    left_button = instance_create(x-64,y-64,obj_button_left)
}
if(!instance_exists(obj_button_right)){
    right_button = instance_create(x+64,y-64,obj_button_right)
}
if(!instance_exists(obj_button_left_swipe)){
    left_button_swipe = instance_create(x-64,y+64,obj_button_left_swipe)
}
if(!instance_exists(obj_button_right_swipe)){
    right_button_swipe = instance_create(x+64,y+64,obj_button_right_swipe)
}*/

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scr_visual_effect(ef_firework,c_white,55);
scr_visual_effect(ef_firework,c_orange,45);
scr_visual_effect(ef_firework,c_red,30);

audio_play_sound_if_not_muted(snd_disappoint,10,0);

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///RESET spd_factor

spd_factor = spd_factor_base;
speed_max = scr_speed_max();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///MOVE, ANIMATE

//if display_get_orientation() = display_landscape

/*naziv_objekta = object_get_name(object_index);
show_debug_message(naziv_objekta);*/


//MOVE

if (os_type == os_android){
    device_tilt_x = device_get_tilt_x();
    device_tilt_y = device_get_tilt_y();
    
    //if (instance_exists(obj_boss)){
    /*device_tilt_z = device_get_tilt_z();
        
        error_counter ++;
        if (error_counter == 30){
            show_message(device_tilt_z);
            error_counter = 0;
        }
        show_debug_message(device_tilt_z);*/
    //}
}
    
if (os_type == os_windows){
    if (keyboard_check(vk_up) || keyboard_check(ord('W'))) device_tilt_y = -device_tilt_y_max/1.5;
    else if (keyboard_check(vk_down) || keyboard_check(ord('S'))) device_tilt_y = device_tilt_y_max/1.5;
    else device_tilt_y = 0;
    
    if (keyboard_check(vk_left) || keyboard_check(ord('A'))) device_tilt_x = device_tilt_x_max/1.5;
    else if (keyboard_check(vk_right) || keyboard_check(ord('D'))) device_tilt_x = -device_tilt_x_max/1.5;
    else device_tilt_x = 0;
}

if (abs(device_tilt_y) &lt; device_tilt_y_min &amp;&amp; abs(device_tilt_x) &lt; device_tilt_x_min) no_input = true;
else no_input = false;


if (device_tilt_x==0) device_tilt_x = device_tilt_x_min;
if (device_tilt_y==0) device_tilt_y = device_tilt_y_min;

//check minimum &lt; between &lt; maximum
if (abs(device_tilt_x) &lt;= device_tilt_x_min){
    x_spd = 0;
}else if (abs(device_tilt_x) &lt; device_tilt_x_max){
    x_spd = -(spd_factor * device_tilt_x);
}else{
    x_spd = -(spd_factor * device_tilt_x_max) *sign(device_tilt_x);
}

if (abs(device_tilt_y) &lt;= device_tilt_y_min){
    y_spd = 0;
}else if (abs(device_tilt_y &lt; device_tilt_y_max)){
    y_spd = spd_factor * device_tilt_y;
}else{
    y_spd = spd_factor * device_tilt_y_max *sign(device_tilt_y);
}

//change position
if (state == 'normal'){
    x += x_spd;
    y += y_spd;
}

//spd treba da racuna iako ne moze da se krece, posto ce se koristiti u funkcijama koprcanja

//tail animation
tail.x = x;
tail.y = y;

theta = scr_theta();

if (state == 'normal'){
    image_angle = theta;
    tail.image_angle = theta;
}

if (state == 'normal-new'){
    //x_acc = x_spd/3;
    //y_acc = y_spd/3;
    
    acc = spd/9;
    motion_add(theta, acc);
    if (speed &gt; speed_max) speed = speed_max;
    //show_debug_message(speed);
    
    if (no_input){
        if (speed &gt; speed_reduction) speed -= speed_reduction;
        else if (speed &lt;= speed_reduction) speed = 0;
    }
}
if (!no_input){
    image_angle = theta;
    //tail.image_angle = direction; //sigurica racunanje tail.image_angle //treba testirati na telefonu pa mozda vratiti ovaj... sumnjam da hoce trebati
    
    //jebeni sat na navijanje, ali simpa izgleda :)
    /*with(tail){
        if (image_yscale &gt;= 1){
            image_yscale = 1;
            scaling_dir = -1;
        } else if (image_yscale &lt;= -1){
            image_yscale = -1;
            scaling_dir = 1;
        }
        image_yscale += 0.2*scaling_dir;
    }*/
    
    //ovo je malo umarajuce za oci, ali trenutno je zanimljivo
    with(tail){
        scale_dir_counter ++;
        if (scale_dir_counter == 2){
            image_yscale *= -1;
            scale_dir_counter = 0;
        }
    }
    //tail.image_speed = speed_max/speed;
}
//image_blend = make_colour_hsv(255, 255, random(255)); 

//tail.image_angle
scr_tail_image_angle();

//check room boundarioso (bottom, top)
if (y &gt;= room_height - sprite_get_height(obj_sperm)/4) y = room_height - sprite_get_height(obj_sperm)/4;
else if ( y &lt;= 0 + sprite_get_height(obj_sperm)/4) y = 0 + sprite_get_height(obj_sperm)/4;

//camera
if (camera_style == 1){
    camera.x = x + x_spd*5;
    camera.y = y + y_spd*5;
}else if (camera_style == 2){
    camera.x = x + lengthdir_x(speed,direction)*5;
    camera.y = y + lengthdir_y(speed,direction)*5;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="0">
      <action>
        <libid>1</libid>
        <id>112</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_wrap</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
